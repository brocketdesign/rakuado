extends ../../base

block mainContent
  h1 A/B Test Results
  a(class="btn btn-primary" href="/dashboard/app/create-ab-test") Create

  //- Optional: Filter by Affiliate
  form#filterForm(method="GET" action="/api/abtest/ab-test-results")
    .form-group
      label(for="affiliateId") Filter by Affiliate ID
      input#affiliateId.form-control(type="text" name="affiliateId" placeholder="Enter Affiliate ID (optional)" value=affiliateId)
    button.btn.btn-secondary(type="submit") Filter

  //- Display the results in a table
  if results.length > 0
    table.table.table-striped
      thead
        tr
          th Date
          th Image Name
          th Variant
          th Image
          th Clicks
          th Views
          if !affiliateId
            th Affiliate Name
            th Affiliate ID
      tbody
        each result in results
          tr
            td= result.date
            td= result.imageName
            td= result.variant
            td: img(src=result.imageUrl, width="100")
            td= result.clicks
            td= result.views
            if !affiliateId
              td= result.affiliateName
              td= result.affiliateId
  else
    p No A/B Test results found for the specified criteria.
