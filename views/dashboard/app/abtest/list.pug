extends ../../base

block mainContent
  .container.mt-5
    h1.text-center.mb-4 A/Bテスト結果
    .text-right.mb-3
      a.btn.btn-primary(href="/dashboard/app/create-ab-test") 新規作成

    //- フィルタリングフォーム
    form#filterForm(method="GET" action="/api/abtest/get-ab-test-results")
      .form-row.align-items-end
        .form-group.col-md-4
          label(for="affiliateId") アフィリエイトIDでフィルタ
          input#affiliateId.form-control(type="text" name="affiliateId" placeholder="アフィリエイトIDを入力（任意）" value=affiliateId)
        .form-group.col-md-2
          button.btn.btn-secondary(type="submit") フィルタ

    //- 結果表示テーブル
    if results.length > 0
      .table-responsive
        table.table.table-bordered.table-hover.mt-4
          thead.thead-dark
            tr
              th.scope.col 日付
              th.scope.col 画像名
              th.scope.col バリアント
              th.scope.col 画像
              th.scope.col クリック数
              th.scope.col 表示数
              if !affiliateId
                th.scope.col アフィリエイト名
                th.scope.col アフィリエイトID
          tbody
            each result in results
              tr
                td= result.date
                td= result.imageName
                td= result.variant
                td: img(src=result.imageUrl, width="100", alt=`${result.imageName}の画像`)
                td= result.clicks
                td= result.views
                if !affiliateId
                  td= result.affiliateName
                  td= result.affiliateId
    else
      .alert.alert-info.mt-4(role="alert")
        | 指定された条件に一致するA/Bテスト結果が見つかりませんでした。
